
@{
    ViewBag.Title = "DSCanBo";
}

<div class="content-wrapper">
    <div class="container wrapperm mb-5">
        <!-- Chú ý -->
        
        <div id="DSCB" class="col-md-12">
            <h2>Danh sách cán bộ</h2>
            <div class="form-check-inline mb-3">
                <div class="form-group mr-4">
                    <label for="filterDepartment">Lọc theo phòng ban:</label>
                    <select class="form-control" id="filterDepartment">
                        <option value="">Tất cả</option>
                        <option value="Tổng hợp">Tổng hợp</option>
                        <option value="Kế toán">Kế toán</option>
                        <option value="Nhân sự">Nhân sự</option>
                        <option value="Kỹ thuật">Kỹ thuật</option>
                    </select>
                </div>
                <div class="form-group mr-4">
                    <label for="filterGender">Lọc theo giới tính:</label>
                    <select class="form-control" id="filterGender">
                        <option value="">Tất cả</option>
                        <option value="Nam">Nam</option>
                        <option value="Nữ">Nữ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="searchName">Tìm kiếm theo tên:</label>
                    <div class="input-group">
                        <input type="text" class="form-control" id="searchName" placeholder="Nhập tên...">
                        <div class="input-group-append">
                            <button class="btn btn-primary" id="searchButton" type="button">Tìm kiếm</button>
                        </div>
                    </div>
                </div>
            </div>

            <table id="employeeTable" class="table table-bordered">
                <thead>
                    <tr>
                        <th>Họ và tên</th>
                        <th>Giới tính</th>
                        <th>Email</th>
                        <th>Số điện thoại</th>
                        <th>Phòng ban</th>
                        <th>Sửa thông tin</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Dữ liệu cán bộ sẽ được hiển thị ở đây -->
                    <tr data-department="Tổng hợp" data-gender="Nam">
                        <td>Nguyễn Văn An</td>
                        <td>Nam</td>
                        <td>nguyenvanan_01@gmail.com</td>
                        <td>0123456789</td>
                        <td>Tổng hợp</td>
                        <td>
                            <a href="@Url.Action("SuaTTCanBo", "SuaThongTinCanBo")" class="mx-3">
                                <i class="fas fa-edit"></i> <!-- Icon chỉnh sửa -->
                            </a>
                            <button class="delete-btn">
                                <i class="fas fa-trash-alt"></i> <!-- Icon xóa -->
                            </button>
                        </td>
                    </tr>
                    <tr data-department="Kế toán" data-gender="Nữ">
                        <td>Trần Thị Bình</td>
                        <td>Nữ</td>
                        <td>tranthibinh_02@gmail.com</td>
                        <td>0135791234</td>
                        <td>Kế toán</td>
                        <td>
                            <a href="@Url.Action("SuaTTCanBo", "SuaThongTinCanBo")" class="mx-3">
                                <i class="fas fa-edit"></i> <!-- Icon chỉnh sửa -->
                            </a>
                            <button class="delete-btn">
                                <i class="fas fa-trash-alt"></i> <!-- Icon xóa -->
                            </button>
                        </td>

                    </tr>
                    <tr data-department="Nhân sự" data-gender="Nam">
                        <td>Phạm Văn Chí</td>
                        <td>Nam</td>
                        <td>phamvanchi_03@gmail.com</td>
                        <td>0345825798</td>
                        <td>Nhân sự</td>
                        <td>
                            <a href="@Url.Action("SuaTTCanBo", "SuaThongTinCanBo")" class="mx-3">
                                <i class="fas fa-edit"></i> <!-- Icon chỉnh sửa -->
                            </a>
                            <button class="delete-btn">
                                <i class="fas fa-trash-alt"></i> <!-- Icon xóa -->
                            </button>
                        </td>

                    </tr>
                    <tr data-department="Kỹ thuật" data-gender="Nữ">
                        <td>Nguyễn Thị Diệu</td>
                        <td>Nữ</td>
                        <td>nguyenthidieu_04@gmail.com</td>
                        <td>0254825684</td>
                        <td>Kỹ thuật</td>
                        <td>
                            <a href="@Url.Action("SuaTTCanBo", "SuaThongTinCanBo")" class="mx-3">
                                <i class="fas fa-edit"></i> <!-- Icon chỉnh sửa -->
                            </a>
                            <button class="delete-btn">
                                <i class="fas fa-trash-alt"></i> <!-- Icon xóa -->
                            </button>
                        </td>

                    </tr>

                    <tr data-department="Tổng hợp" data-gender="Nam">
                        <td>Trần Văn Em</td>
                        <td>Nam</td>
                        <td>tranvanem_05@gmail.com</td>
                        <td>0356565656</td>
                        <td>Tổng hợp</td>
                        <td>
                            <a href="@Url.Action("SuaTTCanBo", "SuaThongTinCanBo")" class="mx-3">
                                <i class="fas fa-edit"></i> <!-- Icon chỉnh sửa -->
                            </a>
                            <button class="delete-btn">
                                <i class="fas fa-trash-alt"></i> <!-- Icon xóa -->
                            </button>
                        </td>

                    </tr>

                    <tr data-department="Nhân sự" data-gender="Nữ">
                        <td>Lê Thị Gái</td>
                        <td>Nữ</td>
                        <td>lethigai_06@gmail.com</td>
                        <td>0958859958</td>
                        <td>Nhân sự</td>
                        <td>
                            <a href="@Url.Action("SuaTTCanBo", "SuaThongTinCanBo")" class="mx-3">
                                <i class="fas fa-edit"></i> <!-- Icon chỉnh sửa -->
                            </a>
                            <button class="delete-btn">
                                <i class="fas fa-trash-alt"></i> <!-- Icon xóa -->
                            </button>
                        </td>

                    </tr>

                    <tr data-department="Kế toán" data-gender="Nam">
                        <td>Phạm Văn Giai</td>
                        <td>Nam</td>
                        <td>phamvangiai_07@gmail.com</td>
                        <td>0738856584</td>
                        <td>Kế toán</td>
                        <td>
                            <a href="@Url.Action("SuaTTCanBo", "SuaThongTinCanBo")" class="mx-3">
                                <i class="fas fa-edit"></i> <!-- Icon chỉnh sửa -->
                            </a>
                            <button class="delete-btn">
                                <i class="fas fa-trash-alt"></i> <!-- Icon xóa -->
                            </button>
                        </td>

                    </tr>

                    <tr data-department="Tổng hợp" data-gender="Nữ">
                        <td>Hoàng Thị Hà</td>
                        <td>Nữ</td>
                        <td>hoangthiha_08@gmail.com</td>
                        <td>0125489789</td>
                        <td>Tổng hợp</td>
                        <td>
                            <a href="@Url.Action("SuaTTCanBo", "SuaThongTinCanBo")" class="mx-3">
                                <i class="fas fa-edit"></i> <!-- Icon chỉnh sửa -->
                            </a>
                            <button class="delete-btn">
                                <i class="fas fa-trash-alt"></i> <!-- Icon xóa -->
                            </button>
                        </td>

                    </tr>
                    <tr data-department="Kỹ thuật" data-gender="Nam">
                        <td>Trần Văn Hy</td>
                        <td>Nam</td>
                        <td>tranvanhy_09@gmail.com</td>
                        <td>0785858585</td>
                        <td>Kỹ thuật</td>
                        <td>
                            <a href="@Url.Action("SuaTTCanBo", "SuaThongTinCanBo")" class="mx-3">
                                <i class="fas fa-edit"></i> <!-- Icon chỉnh sửa -->
                            </a>
                            <button class="delete-btn">
                                <i class="fas fa-trash-alt"></i> <!-- Icon xóa -->
                            </button>
                        </td>

                    </tr>

                    <tr data-department="Kế toán" data-gender="Nữ">
                        <td>Nguyễn Thị Kiều</td>
                        <td>Nữ</td>
                        <td>nguyenthikieu_10@gmail.com</td>
                        <td>0258789963</td>
                        <td>Kế toán</td>
                        <td>
                            <a href="@Url.Action("SuaTTCanBo", "SuaThongTinCanBo")" class="mx-3">
                                <i class="fas fa-edit"></i> <!-- Icon chỉnh sửa -->
                            </a>
                            <button class="delete-btn">
                                <i class="fas fa-trash-alt"></i> <!-- Icon xóa -->
                            </button>
                        </td>

                    </tr>
                    <tr data-department="Kế toán" data-gender="Nữ">
                        <td>Thái Thị Tuyền</td>
                        <td>Nữ</td>
                        <td>thaithituyen_11@gmail.com</td>
                        <td>0359157759</td>
                        <td>Nhân sự</td>
                        <td>
                            <a href="@Url.Action("SuaTTCanBo", "SuaThongTinCanBo")" class="mx-3">
                                <i class="fas fa-edit"></i> <!-- Icon chỉnh sửa -->
                            </a>
                            <button class="delete-btn">
                                <i class="fas fa-trash-alt"></i> <!-- Icon xóa -->
                            </button>
                        </td>

                    </tr>
                    <tr data-department="Kế toán" data-gender="Nữ">
                        <td>Lưu Chí Vỹ</td>
                        <td>Nam</td>
                        <td>luuchivy_12@gmail.com</td>
                        <td>0258369147</td>
                        <td>Kỹ thuật</td>
                        <td>
                            <a href="@Url.Action("SuaTTCanBo", "SuaThongTinCanBo")" class="mx-3">
                                <i class="fas fa-edit"></i> <!-- Icon chỉnh sửa -->
                            </a>
                            <button class="delete-btn">
                                <i class="fas fa-trash-alt"></i> <!-- Icon xóa -->
                            </button>
                        </td>

                    </tr>

                    <!-- Thêm các hàng dữ liệu khác tương tự -->
                </tbody>
            </table>
        </div>
        
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Script để lọc danh sách cán bộ -->
<script>
    $(document).ready(function () {
        // Bắt sự kiện thay đổi trong dropdown lọc phòng ban
        $('#filterDepartment').change(function () {
            filterEmployees($(this).val(), $('#filterGender').val());
        });

        // Bắt sự kiện thay đổi trong dropdown lọc giới tính
        $('#filterGender').change(function () {
            filterEmployees($('#filterDepartment').val(), $(this).val());
        });

        // Bắt sự kiện click vào nút tìm kiếm
        $('#searchButton').click(function () {
            var searchText = $('#searchName').val().toLowerCase();
            filterEmployeesBySearch(searchText);
        });

        // Hàm để lọc và hiển thị các cán bộ dựa trên phòng ban và giới tính
        function filterEmployees(department, gender) {
            $('#employeeTable tbody tr').each(function () {
                var rowDepartment = $(this).data('department');
                var rowGender = $(this).data('gender');

                if ((department === '' || rowDepartment === department) && (gender === '' || rowGender === gender)) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });
        }

        // Hàm để lọc và hiển thị các cán bộ dựa trên tên
        function filterEmployeesBySearch(searchText) {
            $('#employeeTable tbody tr').each(function () {
                var employeeName = $(this).find('td:first-child').text().toLowerCase();

                if (employeeName.includes(searchText)) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });
        }
    });

    // Xử lý sự kiện xóa cán bộ
    document.addEventListener("DOMContentLoaded", function () {
        var deleteButtons = document.querySelectorAll(".delete-btn");
        deleteButtons.forEach(function (button) {
            button.addEventListener("click", function () {
                var row = this.closest("tr");
                if (confirm("Bạn có chắc chắn muốn xóa thông tin cán bộ này không?")) {
                    row.remove();
                }
            });
        });
    });
</script>